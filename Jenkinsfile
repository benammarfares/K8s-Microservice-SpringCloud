pipeline {
    agent any
    stages {
        stage('Test') {
            steps {
                kubeconfig(caCertificate: 'LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCakNDQWU2Z0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwdGFXNXAKYTNWaVpVTkJNQjRYRFRJME1EZ3dPREV4TkRRME4xb1hEVE0wTURnd056RXhORFEwTjFvd0ZURVRNQkVHQTFVRQpBeE1LYldsdWFXdDFZbVZEUVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS1p6CjlQeHJ2WFZ0OFRjUmtOV2kycFJPRGVtMm02ZHpVQ0JkTmhROGdteFo5T2dDSzNDM1h4YmlScjhHbHdCdnZza2UKWFNKelV3WElFRGdab0RRSEpxMWpWOEdoMk81cEtQT0M2ZWRkd0k2RmN1K2tFWjJJR0xkVUZkR2Fwd1lPaUhSLwp6ZkdRSEJrbHhXaG8vbGFhL0U3b2ZIWE9RaWRXOXNheHAwYVpkSVJaTzlUaUptc0lXWDZBVGo0dmRqY3VTL1NMCjVoaWttS2FSMXhURHRtZDNobjJHbWtPaW1ablp1QWZYOTIwTkx1SmtKUEExUVNGcXBkalNReHd2NURWUDc4V24KSWQrZXVDbHdRcnZNM0ZNZnpQOVE5dW5mZHBJdVJSZmVmckw2TjNXMjRqRmxra1ozNzNNdGpoWHl4Mk5pY1dkbgpiZG1RaWRFNFNBczFibVROYVZzQ0F3RUFBYU5oTUY4d0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXCk1CUUdDQ3NHQVFVRkJ3TUNCZ2dyQmdFRkJRY0RBVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQjBHQTFVZERnUVcKQkJRVDN4ejNXVGk2dEpIcGlrSXhHMDB6QVdBeTJ6QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFQcFZRN0hGRwpvQ3FzNUxuRElpdUdMTWFMdW90MW1xNlBLV3huUE4wcHh0b2ZVOHVUUUtGUEUwd3MxM0o4cy8xdUZTTUdFSTVBCno2NjduYjFVVUVBOVBqMnlLZVQ3TXN3TFA1ZWdVSHB4cDV6TlIxbXRjd0tyVit3ZmVaemh5ZjhTb3dEeC9sMWYKVVNrS2ZqMkdIbG9SUlNjcVQrUHQ0QUdMZUNSUnE1QUlSM3d5dnNyNGZoYkhsazBNdWJyalk1akp1NWNIbEZOcQpWbWcrUzc1Ry9EdHdrTWhrOVdJRDFNNVN0TURzMGRiR0IyMzhaNVNIOWdJTjUyKzMrbzAxZU5EWlJuemc3QlNECkRWamZqMG1rb1ZvSUtjZTJ2aUlXSEJMek1qZmgyUVFiRitIT3g1UjJWNjM2N1h6b3NoQ3UzVVBFY0JEZTlKdTgKMmRpRkFQOEhUSmxUMUE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==', credentialsId: 'mykubeconfig', serverUrl: 'https://192.168.49.2:8443') {
                    sh 'kubectl get pods'
                }
            }
        }
    }
}